# üöÄ OnlyMatt Gateway - Guide Complet de Configuration et Gestion

## ÔøΩ STRUCTURE DU PROJET - TABLEAU D√âTAILL√â

| Dossier/Fichier | Type | Taille | Description |
|----------------|------|--------|-------------|
| **üìÅ Racine du projet** | | | |
| `gateway.py` | Fichier Python | ~60KB | **C≈ìur de l'application** - API FastAPI principale avec tous les endpoints |
| `requirements.txt` | Fichier config | ~190B | D√©pendances Python (FastAPI, httpx, libsql-client, etc.) |
| `runtime.txt` | Fichier config | ~14B | Version Python pour Render (3.11.9) |
| `Procfile` | Fichier config | ~53B | Commande de d√©marrage pour Render/Heroku |
| `CONFIGURATION_GUIDE.md` | Documentation | ~7.7KB | **Guide complet** que vous lisez actuellement |
| `README.md` | Documentation | ~3.4KB | Documentation g√©n√©rale du projet |
| `.env` | Configuration | ~566B | Variables d'environnement (cl√©s API, etc.) |
| `.gitignore` | Configuration | ~41B | Fichiers √† ignorer par Git |
| `__pycache__/` | Cache Python | | Cache de compilation Python (g√©n√©r√© automatiquement) |
| `.git/` | Git | | Dossier de contr√¥le de version Git |
| `.venv/` | Environnement virtuel | | Environnement Python isol√© (non versionn√©) |

### **üìÅ Dossier `templates/` - Interfaces Web**
| Fichier | Taille | Description |
|---------|--------|-------------|
| `admin.html` | ~4.5KB | Interface d'administration principale |
| `analysis.html` | ~4.7KB | Page d'analyse et rapports |
| `chat.html` | ~2.6KB | Interface de chat AI |
| `educate.html` | ~4.9KB | Page d'√©ducation/formation |
| `reports.html` | ~3.4KB | Page des rapports syst√®me |
| `tasks.html` | ~4.2KB | Gestionnaire de t√¢ches |

### **üìÅ Dossier `static/` - Ressources Statiques**
| Sous-dossier | Contenu | Description |
|-------------|---------|-------------|
| `css/` | Feuilles de style | Styles CSS pour l'interface web |
| `js/` | Scripts JavaScript | Logique frontend et interactions |

### **üìÅ Dossier `uploads/` - Fichiers Upload√©s**
| Fichier | Taille | Description |
|---------|--------|-------------|
| `1761098386_bbf1905e.txt` | 115B | Fichier upload√© de test (contenu exemple) |
| `1761098423_29b58664.txt` | 42B | Fichier upload√© de test (contenu exemple) |

### **üìÅ Dossier `__pycache__/` - Cache Python**
- Contient les fichiers `.pyc` compil√©s automatiquement
- G√©n√©r√© lors de l'ex√©cution des scripts Python
- Non versionn√© (dans .gitignore)

### **üìÅ Dossier `.git/` - Contr√¥le de Version**
- Historique des commits
- Branches et tags
- Configuration Git locale
- Non visible dans l'explorateur normal

### **üìÅ Dossier `.venv/` - Environnement Virtuel**
- Environnement Python isol√©
- Contient toutes les d√©pendances install√©es
- Non versionn√© (dans .gitignore)
- Cr√©√© avec `python3 -m venv venv`

### **üìÑ Fichiers de Test et D√©veloppement**
| Fichier | Taille | Description |
|---------|--------|-------------|
| `test_website.py` | ~3.5KB | Tests des fonctionnalit√©s de g√©n√©ration de sites web |
| `test_upload.py` | ~2.0KB | Tests des fonctionnalit√©s d'upload de fichiers |
| `test_groq.py` | ~1.1KB | Tests sp√©cifiques de l'API Groq |
| `test.py` | ~1.2KB | Tests divers et utilitaires |

### **üåê Fichiers G√©n√©r√©s (Sites Web)**
| Fichier | Taille | Description |
|---------|--------|-------------|
| `generated_website.html` | ~1.0KB | Site web g√©n√©r√© (version originale) |
| `generated_website_modern.html` | ~1.0KB | Site web g√©n√©r√© (version moderne) |
| `generated_website_final.html` | ~1.0KB | Site web g√©n√©r√© (version finale) |

---

## üìä STATISTIQUES DU PROJET

- **Total fichiers** : ~35 fichiers
- **Code Python** : ~65KB (principalement `gateway.py`)
- **Documentation** : ~11KB (`README.md` + `CONFIGURATION_GUIDE.md`)
- **Templates HTML** : ~25KB (6 fichiers d'interface)
- **Configuration** : ~1KB (runtime, requirements, etc.)
- **Tests** : ~8KB (4 fichiers de test)

## üîç UTILISATION DES ESPACES

- **Code applicatif** : `gateway.py` (60KB) - C≈ìur de l'API
- **Interfaces web** : `templates/` (25KB) - 6 pages HTML
- **Documentation** : Guides et README (11KB)
- **Tests** : Scripts de validation (8KB)
- **Uploads** : Fichiers utilisateur (variable)
- **Cache/D√©pendances** : Non versionn√©s (~500MB+ dans .venv)

---

## ÔøΩüìã CHECKLIST DES R√âGLAGES SYST√àME

### üîë Services Externes (Obligatoires)

#### **1. API Groq (IA)**
- [ ] Cr√©er un compte sur [groq.com](https://groq.com)
- [ ] G√©n√©rer une cl√© API dans le dashboard
- [ ] V√©rifier les cr√©dits disponibles
- [ ] Tester l'API avec un appel simple

#### **2. Base de Donn√©es Turso**
- [ ] Cr√©er un compte sur [turso.tech](https://turso.tech)
- [ ] Cr√©er une nouvelle base de donn√©es
- [ ] G√©n√©rer un token d'authentification
- [ ] R√©cup√©rer l'URL de la base de donn√©es
- [ ] Tester la connexion avec `libsql-client`

#### **3. H√©bergement Render (Optionnel)**
- [ ] Cr√©er un compte sur [render.com](https://render.com)
- [ ] Lier le compte GitHub
- [ ] Configurer les variables d'environnement
- [ ] V√©rifier les limites du plan gratuit

#### **4. WordPress (Optionnel)**
- [ ] Installation WordPress fonctionnelle
- [ ] Plugin "Application Passwords" activ√©
- [ ] G√©n√©ration d'un mot de passe d'application
- [ ] Permissions d'√©criture sur l'API REST

### üñ•Ô∏è Configuration Syst√®me Local

#### **1. Environnement Python**
- [ ] Python 3.11+ install√©
- [ ] `pip` √† jour
- [ ] Virtualenv configur√©
- [ ] D√©pendances install√©es (`requirements.txt`)

#### **2. Variables d'Environnement**
- [ ] Fichier `.env` cr√©√©
- [ ] `OM_ADMIN_KEY` d√©fini (cl√© d'admin)
- [ ] `GROQ_API_KEY` configur√©
- [ ] `TURSO_DB_URL` d√©fini
- [ ] `TURSO_DB_AUTH_TOKEN` configur√©

#### **3. Permissions Syst√®me**
- [ ] Droits d'√©criture sur le dossier `uploads/`
- [ ] Droits d'√©criture sur le dossier `static/`
- [ ] Droits d'acc√®s aux templates

---

## üõ†Ô∏è GUIDE PAS √Ä PAS - NOUVELLE INSTALLATION

### **√âtape 1: Pr√©paration de l'Environnement**

```bash
# 1. Cloner le repository
git clone https://github.com/onlymatt43/onlymatt-gateway.git
cd onlymatt-gateway

# 2. Cr√©er un environnement virtuel
python3 -m venv venv
source venv/bin/activate  # Sur macOS/Linux
# ou venv\Scripts\activate sur Windows

# 3. Installer les d√©pendances
pip install -r requirements.txt
```

### **√âtape 2: Configuration des Services Externes**

#### **Configuration Groq API**
```bash
# Cr√©er le fichier .env
touch .env

# Ajouter la cl√© API Groq
echo "GROQ_API_KEY=votre_cle_api_groq" >> .env
```

#### **Configuration Turso Database**
```bash
# Ajouter les variables Turso
echo "TURSO_DB_URL=votre_url_turso" >> .env
echo "TURSO_DB_AUTH_TOKEN=votre_token_turso" >> .env
```

#### **Configuration Admin**
```bash
# G√©n√©rer une cl√© d'admin s√©curis√©e
python3 -c "import secrets; print(secrets.token_hex(16))"
# Copier la cl√© g√©n√©r√©e et l'ajouter :
echo "OM_ADMIN_KEY=votre_cle_admin" >> .env
```

### **√âtape 3: Test Local**

```bash
# 1. Tester l'import
python3 -c "import gateway; print('‚úÖ Import r√©ussi')"

# 2. Lancer le serveur local
uvicorn gateway:app --host 127.0.0.1 --port 8000 --reload

# 3. Tester les endpoints dans un autre terminal
curl http://localhost:8000/health
curl -H "x-om-key: votre_cle_admin" http://localhost:8000/ai/health
```

### **√âtape 4: D√©ploiement sur Render**

#### **Via GitHub (Recommand√©)**
```bash
# 1. Pousser les changements
git add .
git commit -m "Configuration initiale"
git push origin main

# 2. Sur Render.com :
# - Cr√©er un nouveau "Web Service"
# - Connecter le repository GitHub
# - Configurer les variables d'environnement
# - D√©ployer
```

#### **Variables d'Environnement sur Render**
```
OM_ADMIN_KEY = votre_cle_admin
GROQ_API_KEY = votre_cle_groq
TURSO_DB_URL = votre_url_turso
TURSO_DB_AUTH_TOKEN = votre_token_turso
AI_BACKEND = groq
```

### **√âtape 5: Configuration WordPress (Optionnel)**

```bash
# 1. Dans WordPress Admin > Users > Your Profile
# 2. Activer "Application Passwords"
# 3. G√©n√©rer un nouveau mot de passe d'application
# 4. L'ajouter aux variables d'environnement :
echo "WORDPRESS_URL=https://votresite.com" >> .env
echo "WORDPRESS_USER=votre_username" >> .env
echo "WORDPRESS_APP_PASSWORD=votre_mot_de_passe_app" >> .env
```

---
# √âditez test_render.sh et remplacez :
# https://VOTRE_APP_RENDER
# (https://onlymatt-gateway.onrender.com/)
## üîÑ GESTION AU QUOTIDIEN

### **D√©marrage Quotidien**

#### **1. V√©rification du Statut**
```bash
# V√©rifier que tout fonctionne
curl https://onlymatt-gateway.onrender.com/health
curl -H "x-om-key: votre_cle" https://onlymatt-gateway.onrender.com/ai/health
```

#### **2. Monitoring des Logs**
- **Sur Render**: Dashboard > Service > Logs
- **Local**: Terminal avec `uvicorn --log-level info`
- **Erreurs communes**:
  - API Groq √©puis√©e ‚Üí V√©rifier cr√©dits
  - DB Turso inaccessible ‚Üí V√©rifier token/URL
  - WordPress 401 ‚Üí R√©g√©n√©rer Application Password

### **Maintenance R√©guli√®re**

#### **Hebdomadaire**
- [ ] V√©rifier les logs pour erreurs
- [ ] Tester les endpoints principaux
- [ ] V√©rifier l'espace disque (uploads/)
- [ ] Mettre √† jour les d√©pendances si n√©cessaire

#### **Mensuel**
- [ ] V√©rifier les cr√©dits Groq
- [ ] Sauvegarder la configuration
- [ ] Tester la g√©n√©ration compl√®te de site
- [ ] V√©rifier les performances

### **R√©solution des Probl√®mes Courants**

#### **Erreur 500 - Import Failed**
```bash
# V√©rifier les d√©pendances
pip install -r requirements.txt
python3 -c "import gateway"
```

#### **Erreur 401 - Auth Failed**
```bash
# V√©rifier la cl√© admin
curl -H "x-om-key: VOTRE_CLE" https://votre-app.com/ai/health
```

#### **Erreur 400 - AI Failed**
```bash
# V√©rifier les cr√©dits Groq
curl -H "Authorization: Bearer VOTRE_CLE_GROQ" \
  https://api.groq.com/openai/v1/models
```

#### **Erreur DB Connection**
```bash
# Tester la connexion Turso
python3 -c "
import os
from libsql_client import create_client
client = create_client(
    url=os.getenv('TURSO_DB_URL'),
    auth_token=os.getenv('TURSO_DB_AUTH_TOKEN')
)
result = client.execute('SELECT 1')
print('‚úÖ DB OK' if result.rows else '‚ùå DB Failed')
"
```

### **Workflow de D√©veloppement**

#### **Ajouter une Nouvelle Fonctionnalit√©**
```bash
# 1. Cr√©er une branche
git checkout -b feature/nouvelle-fonction

# 2. D√©velopper et tester localement
# 3. Commiter les changements
git add .
git commit -m "feat: nouvelle fonctionnalit√©"

# 4. Tester sur staging si disponible
# 5. Merger dans main
git checkout main
git merge feature/nouvelle-fonction
git push origin main
```

#### **Mise √† Jour de Production**
```bash
# Apr√®s push sur main, Render d√©ploie automatiquement
# V√©rifier les logs de d√©ploiement
# Tester les nouvelles fonctionnalit√©s
```

### **Sauvegarde et S√©curit√©**

#### **Donn√©es √† Sauvegarder**
- [ ] Variables d'environnement (`.env`)
- [ ] Configuration Render
- [ ] Cl√©s API (s√©curis√©es)
- [ ] Donn√©es importantes en base

#### **S√©curit√©**
- [ ] Cl√©s API jamais dans le code
- [ ] Variables d'environnement valid√©es
- [ ] Logs ne contiennent pas d'informations sensibles
- [ ] Mises √† jour de s√©curit√© r√©guli√®res

---

## üìû Support et D√©pannage

### **Ressources Utiles**
- **Documentation FastAPI**: https://fastapi.tiangolo.com/
- **API Groq**: https://console.groq.com/docs/
- **Turso Docs**: https://docs.turso.tech/
- **Render Guide**: https://docs.render.com/

### **Commandes Utiles**
```bash
# Red√©marrer le service Render
# Dashboard Render > Manual Deploy

# V√©rifier les variables d'environnement
env | grep -E "(GROQ|TURSO|OM_)"

# Tester tous les endpoints
python3 test_website.py
python3 test_upload.py
```

---

**üéØ Checklist Finale :**
- [ ] Services externes configur√©s
- [ ] Installation termin√©e
- [ ] Tests r√©ussis
- [ ] D√©ploiement op√©rationnel
- [ ] Monitoring en place

**Votre OnlyMatt Gateway est pr√™t ! üöÄ**</content>
<parameter name="filePath">/Users/mathieucourchesne/Downloads/onlymatt-gateway/CONFIGURATION_GUIDE.md